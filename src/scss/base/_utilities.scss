@use "sass:map";
@use "variables" as *;

// ============================================
// Utility Classes — Generated from Sass Maps
// + Responsive variants via @media breakpoints
// ============================================

// --- Responsive Mixin ---
// Usage: @include respond($bp) { ... }
@mixin respond($bp) {
  $value: map.get($breakpoints, $bp);
  @if $value {
    @media (min-width: $value) { @content; }
  }
}

// --- Generate responsive utility classes ---
// Tạo .class + .class-sm + .class-md + .class-lg + .class-xl + .class-xxl
@mixin responsive-utility($prefix, $property, $value) {
  .#{$prefix} { #{$property}: $value; }

  @each $bp, $min-width in $breakpoints {
    @media (min-width: $min-width) {
      .#{$prefix}-#{$bp} { #{$property}: $value; }
    }
  }
}

// ============================================
// Display — d-none, d-block, d-flex, d-grid...
// + d-md-none, d-lg-flex, d-xl-grid...
// ============================================
$displays: (block, inline, inline-block, flex, inline-flex, grid, none);

@each $display in $displays {
  .d-#{$display} { display: $display !important; }
}

@each $bp, $min-width in $breakpoints {
  @media (min-width: $min-width) {
    @each $display in $displays {
      .d-#{$bp}-#{$display} { display: $display !important; }
    }
  }
}

// ============================================
// Flexbox
// ============================================
$flex-directions: (column, row, row-reverse, column-reverse);

@each $dir in $flex-directions {
  .flex-#{$dir} { flex-direction: $dir; }
}

.flex-wrap           { flex-wrap: wrap; }
.flex-nowrap         { flex-wrap: nowrap; }
.flex-grow-1         { flex-grow: 1; }
.flex-shrink-0       { flex-shrink: 0; }
.flex-1              { flex: 1; }

$align-items: (start: flex-start, end: flex-end, center: center, stretch: stretch, baseline: baseline);

@each $name, $value in $align-items {
  .align-items-#{$name} { align-items: $value; }
}

$justify-content: (start: flex-start, end: flex-end, center: center, between: space-between, around: space-around, evenly: space-evenly);

@each $name, $value in $justify-content {
  .justify-content-#{$name} { justify-content: $value; }
}

.align-self-center { align-self: center; }
.align-self-start  { align-self: flex-start; }
.align-self-end    { align-self: flex-end; }

// Responsive flex
@each $bp, $min-width in $breakpoints {
  @media (min-width: $min-width) {
    @each $dir in $flex-directions {
      .flex-#{$bp}-#{$dir} { flex-direction: $dir; }
    }
    .flex-#{$bp}-wrap   { flex-wrap: wrap; }
    .flex-#{$bp}-nowrap { flex-wrap: nowrap; }

    @each $name, $value in $align-items {
      .align-items-#{$bp}-#{$name} { align-items: $value; }
    }
    @each $name, $value in $justify-content {
      .justify-content-#{$bp}-#{$name} { justify-content: $value; }
    }
  }
}

// ============================================
// Spacing (margin & padding)
// m-0..5, mt-0..5, mb-0..5, mx-0..5, my-0..5
// p-0..5, pt-0..5, pb-0..5, px-0..5, py-0..5
// + responsive: m-md-3, p-lg-4, etc.
// ============================================
$sides: (
  "":  "",
  "t": "-top",
  "b": "-bottom",
  "s": "-left",
  "e": "-right",
);

@each $size, $value in $spacers {
  @each $abbr, $prop in $sides {
    .m#{$abbr}-#{$size} { margin#{$prop}: $value; }
  }
  .mx-#{$size} { margin-left: $value; margin-right: $value; }
  .my-#{$size} { margin-top: $value; margin-bottom: $value; }

  @each $abbr, $prop in $sides {
    .p#{$abbr}-#{$size} { padding#{$prop}: $value; }
  }
  .px-#{$size} { padding-left: $value; padding-right: $value; }
  .py-#{$size} { padding-top: $value; padding-bottom: $value; }
}

// Responsive spacing
@each $bp, $min-width in $breakpoints {
  @media (min-width: $min-width) {
    @each $size, $value in $spacers {
      @each $abbr, $prop in $sides {
        .m#{$abbr}-#{$bp}-#{$size} { margin#{$prop}: $value; }
        .p#{$abbr}-#{$bp}-#{$size} { padding#{$prop}: $value; }
      }
      .mx-#{$bp}-#{$size} { margin-left: $value; margin-right: $value; }
      .my-#{$bp}-#{$size} { margin-top: $value; margin-bottom: $value; }
      .px-#{$bp}-#{$size} { padding-left: $value; padding-right: $value; }
      .py-#{$bp}-#{$size} { padding-top: $value; padding-bottom: $value; }
    }
  }
}

// Margin auto
.mx-auto { margin-left: auto; margin-right: auto; }
.ms-auto { margin-left: auto; }
.me-auto { margin-right: auto; }

// Gap
@each $size, $value in $spacers {
  .gap-#{$size}  { gap: $value; }
  .g-#{$size}    { gap: $value; }
}

// ============================================
// Text
// ============================================
$text-aligns: (start: left, center: center, end: right);

@each $name, $value in $text-aligns {
  .text-#{$name} { text-align: $value; }
}

// Responsive text alignment
@each $bp, $min-width in $breakpoints {
  @media (min-width: $min-width) {
    @each $name, $value in $text-aligns {
      .text-#{$bp}-#{$name} { text-align: $value; }
    }
  }
}

// Text colors — from theme colors map
@each $name, $value in $theme-colors {
  .text-#{$name} { color: var(--color-#{$name}); }
}
.text-white { color: var(--color-white); }

// Background colors
@each $name, $value in $theme-colors {
  .bg-#{$name} { background-color: var(--color-#{$name}); }
}

.text-truncate {
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

.text-decoration-none { text-decoration: none; }
.text-decoration-underline { text-decoration: underline; }

// --- Font Weight ---
@each $name, $value in $font-weights {
  .fw-#{$name} { font-weight: $value; }
}

// ============================================
// Sizing
// ============================================
$sizes: (25: 25%, 50: 50%, 75: 75%, 100: 100%, auto: auto);

@each $name, $value in $sizes {
  .w-#{$name} { width: $value; }
  .h-#{$name} { height: $value; }
}

.w-20 { width: 20px; }
.min-vh-100 { min-height: 100vh; }
.vh-100 { height: 100vh; }
.vw-100 { width: 100vw; }

// ============================================
// Overflow
// ============================================
$overflows: (auto, hidden, visible, scroll);

@each $val in $overflows {
  .overflow-#{$val}   { overflow: $val; }
  .overflow-x-#{$val} { overflow-x: $val; }
  .overflow-y-#{$val} { overflow-y: $val; }
}

// ============================================
// Position
// ============================================
$positions: (static, relative, absolute, fixed, sticky);

@each $pos in $positions {
  .position-#{$pos} { position: $pos; }
}

// Position anchors
.top-0    { top: 0; }
.end-0    { right: 0; }
.bottom-0 { bottom: 0; }
.start-0  { left: 0; }
.top-50   { top: 50%; }
.start-50 { left: 50%; }

.translate-middle {
  transform: translate(-50%, -50%);
}

// ============================================
// Opacity
// ============================================
$opacities: (0: 0, 25: 0.25, 50: 0.5, 75: 0.75, 100: 1);

@each $name, $value in $opacities {
  .opacity-#{$name} { opacity: $value; }
}

// ============================================
// Shadows
// ============================================
.shadow-sm   { box-shadow: var(--shadow-sm); }
.shadow      { box-shadow: var(--shadow); }
.shadow-lg   { box-shadow: var(--shadow-lg); }
.shadow-none { box-shadow: none; }

// ============================================
// Border
// ============================================
.border       { border: 1px solid var(--border-color); }
.border-0     { border: 0; }
.border-top   { border-top: 1px solid var(--border-color); }
.border-end   { border-right: 1px solid var(--border-color); }
.border-bottom { border-bottom: 1px solid var(--border-color); }
.border-start { border-left: 1px solid var(--border-color); }

.rounded       { border-radius: var(--radius); }
.rounded-sm    { border-radius: var(--radius-sm); }
.rounded-lg    { border-radius: var(--radius-lg); }
.rounded-circle { border-radius: $border-radius-circle; }
.rounded-pill  { border-radius: $border-radius-pill; }
.rounded-0     { border-radius: 0; }

// ============================================
// Misc
// ============================================
.cursor-pointer { cursor: pointer; }
.user-select-none { user-select: none; }

.visible   { visibility: visible; }
.invisible { visibility: hidden; }

.small { font-size: $font-size-sm; }
.text-xs { font-size: 0.75rem; }
.text-muted { color: $color-muted; }
.lead  { font-size: $font-size-lg; font-weight: 300; }
.display-1 { font-size: 5rem; font-weight: 300; line-height: 1.2; }

.img-fluid {
  max-width: 100%;
  height: auto;
}

// --- Sizing helpers ---
.max-w-600 { max-width: 600px; }
.scroll-list {
  max-height: 300px;
  overflow-y: auto;
}

// ============================================
// Print
// ============================================
@media print {
  .d-print-none  { display: none !important; }
  .d-print-block { display: block !important; }
  .d-print-flex  { display: flex !important; }
}
